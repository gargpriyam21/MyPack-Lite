<p style="color: green"><%= notice %></p>
<b><p style="color: red"><%= alert %></p></b>

<h1>Courses</h1>

<table>
  <thead>
  <tr>
    <th>Course Code</th>
    <th>Name</th>
    <th>Instructor Name</th>
    <th>Weekday1</th>
    <th>Weekday2</th>
    <th>Room</th>
    <th>Time</th>
    <th>Capacity</th>
    <th>Status</th>
    <th colspan="4"></th>
  </tr>
  </thead>

  <tbody>
  <% @courses.each do |course| %>
    <tr>
      <td><%= course.course_code %></td>
      <td><%= course.name %></td>
      <td><%= course.instructor_name %></td>
      <td><%= course.weekday1 %></td>
      <% if course.weekday2.nil? %>
        <td><%= "None" %></td>
      <% else %>
        <td><%= course.weekday2 %></td>
      <% end %>
      <td><%= course.room %></td>
      <td><%= course.start_time + ' - ' + course.end_time %></td>
      <td><%= course.students_enrolled.to_s + '/' + course.capacity.to_s %></td>
      <td><%= course.status %></td>
      <td><%= link_to 'Show', course %></td>
      <% if current_user.user_role == 'student' %>
        <td><%= link_to 'Enroll', enroll_course_path(course), method: :post %></td>
      <% end %>
      <% if current_user.user_role == 'instructor' %>
        <td><%= link_to "Students", all_students_course_path(course) %></td>
      <% end %>
      <% if current_user.user_role == 'admin' or Instructor.find_by_user_id(session[:user_id]).id == course.instructor_id%>
        <td><%= link_to 'Edit', edit_course_path(course) %></td>
        <td><%= link_to 'Destroy', course, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      <% end %>
    </tr>
  <% end %>
  </tbody>
</table>

<br>

<% if current_user.user_role != 'student' %>
  <%= link_to "New course", new_course_path %>
<% end %>
